{% trans_default_domain 'avito-board.admin' %}

<ul class="nav nav-pills gap-3 mb-3" id="nav-market">

    <li class="nav-item" role="presentation">
        <button class="btn fw-bolder nav-link active"
                data-bs-toggle="tab"
                type="button"
                role="tab"
                aria-selected="true"

                id="tab_parameter-tab"
                data-bs-target="#tab_parameter"
                aria-controls="nav-market"
        >
            <small class="text-uppercase px-3">
                {# Основные настройки #}
                Обязательные настройки
            </small>
        </button>
    </li>

    <li class="nav-item">
        <button class="btn fw-bolder nav-link"
                data-bs-toggle="tab"
                type="button"
                role="tab"
                aria-selected="true"

                id="tab_property-tab"
                data-bs-target="#tab_property"
                aria-controls="nav-market"
        >
            <small class="text-uppercase px-3">
                {# Пользовательские поля #}
                Настройки 1
            </small>
        </button>
    </li>

</ul>

<div class="tab-content">

    {# ОСНОВНЫЕ НАСТРОЙКИ #}

    <div class="tab-pane fade show active" id="tab_parameter" role="tabpanel">
        {% for mapper in form.mapperSetting %}
            <div class="d-flex p-3 mb-1 gap-2 align-items-end rounded-3 border"
                 style='background-color: {{ mapper.vars.data.elementInstance.isMapping ?:'#fff2f2' }}'
            >

                {# форма для пользовательского ввода #}
                {% if mapper.productField is defined %}
                    <div class="w-50">
                        {#                        {{ dd(mapper.productField) }} #}

                        {{ form_label(mapper.productField) }}
                        {{ form_help(mapper.productField) }}

                        {% if mapper.vars.data.elementInstance.isMapping == false %}
                            текст предупреждения!!!
                        {% endif %}
                        {#                        {% if mapper.productField.vars.help %} #}

                        {#                            {% set rand = random() %} #}

                        {#                            <div> #}
                        {#                                <a tabindex="0" #}
                        {#                                   id="{{ rand }}" #}
                        {#                                   class="small text-decoration-none" #}
                        {#                                   role="button" #}
                        {#                                   data-bs-container="body" #}
                        {#                                   data-bs-toggle="popover" #}
                        {#                                   data-bs-trigger="click" #}
                        {#                                   data-bs-placement="bottom" #}
                        {#                                > #}
                        {#                                    Список значений #}
                        {#                                </a> #}

                        {#                                <div id="{{ rand }}-content" class="d-none mt-5"> #}
                        {#                                    <div class="d-flex gap-3 align-items-center mb-1"> #}
                        {#                                <span> #}
                        {#                                    {% for help in mapper.productField.vars.help %} #}
                        {#                                        {{ help }}<br> #}
                        {#                                    {% endfor %} #}
                        {#                                </span> #}
                        {#                                    </div> #}
                        {#                                </div> #}

                        {#                            </div> #}
                        {#                        {% endif %} #}

                        {#                        {% set help = mapper.productField.vars.help %} #}
                        {#                        <div> #}
                        {#                            {% if help is not null %} #}
                        {#                                Формат значения #}
                        {#                                <a href="{{ help }}" target="_blank"> пример </a> #}
                        {#                            {% endif %} #}
                        {#                        </div> #}
                    </div>

                    <div class="w-50 d-flex mb-1 gap-2 align-items-end rounded-3">
                        {{ form_widget(mapper.productField, {
                            placeholder: 'Выберите свойство продукта...',
                            attr: { 'data-select' : 'select2', class:  'mb-0'}
                        }) }}
                    </div>
                {% endif %}


                {# форма для пользовательского ввода #}
                {% if mapper.def is defined %}

                    <div class="w-50">
                        {{ form_label(mapper.def) }}
                        {#                        {{ form_help(mapper.def) }} #}
                        <div>
                            {{ include (Template(mapper.def.vars.help)) }}
                        </div>

                        {% if mapper.vars.data.elementInstance.isMapping == false %}
                            текст предупреждения!!!
                        {% endif %}

                    </div>

                    <div class="w-50 d-flex mb-1 gap-2 align-items-end rounded-3">

                        {{ form_widget(mapper.def, {
                            placeholder: 'Значение по умолчанию...',
                            attr: { 'placeholder' : 'Значение по умолчанию'}
                        }) }}
                    </div>
                {% endif %}
            </div>
        {% endfor %}
    </div>

    {#    <div class="tab-pane fade show active" id="tab_property" role="tabpanel"> #}
    {#        {% for mapper in form.mapperSetting %} #}
    {#            <div class="d-flex p-3 mb-1 gap-2 align-items-end rounded-3 border" #}
    {#                 style='background-color: {{ mapper.vars.data.elementInstance.isRequired ? '#fff2f2' : '#f8f8f8' }}' #}
    {#            > #}

    {#                <div class="w-50"> #}
    {#                    {{ form_label(mapper.productField) }} #}
    {#                </div> #}

    {#                 свойста для сопоставления #}
    {#                <div class="w-50 d-flex mb-1 gap-2 align-items-end rounded-3"> #}
    {#                    {{ form_widget(mapper.productField, { #}
    {#                        placeholder: 'Выберите свойство продукта...', #}
    {#                        attr: { 'data-select' : 'select2', class:  'mb-0'} #}
    {#                    }) }} #}
    {#                </div> #}

    {#            </div> #}
    {#        {% endfor %} #}
    {#    </div> #}

</div>


